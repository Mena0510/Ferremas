{% extends 'base.html' %}
{% block title %}Inicio{% endblock %}
{% block content %}
<div class="container mt-5">

  <!-- Slider Principal -->
  <div id="sliderFerremas" class="carousel slide mb-5" data-bs-ride="carousel">
    <div class="carousel-inner rounded shadow">
      
      <div class="carousel-item">
        <img src="https://via.placeholder.com/1200x400?text=Protección+industrial" class="d-block w-100" alt="Protección industrial">
        <div class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 rounded p-2">
          <h5>Protección y seguridad</h5>
          <p>Equípate correctamente con nuestros productos.</p>
        </div>
      </div>
      <div class="carousel-item">
        <img src="https://via.placeholder.com/1200x400?text=Ferretería+completa" class="d-block w-100" alt="Ferretería completa">
        <div class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 rounded p-2">
          <h5>FERREMAS</h5>
          <p>Soluciones para construir, reparar y crear.</p>
        </div>
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#sliderFerremas" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#sliderFerremas" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
    </button>
  </div>
  
  <!-- Bienvenida -->
  <div class="text-center mb-5">
    <h1 class="display-4">Bienvenido a FERREMAS</h1>
    <p class="lead">Tu ferretería de confianza con todo lo que necesitas para construir, reparar y crear.</p>
    <a href="{% url 'catalogo_productos' %}" class="btn btn-primary btn-lg mt-3">Ir al Catálogo</a>
  </div>

  <hr>

  <!-- Productos Destacados -->
  <h3 class="mb-4">Productos destacados</h3>
  <div class="row">
    {% for producto in productos_destacados %}
    <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
      <div class="card h-100 shadow-sm rounded-4">
        <!-- Imagen -->
        {% if producto.imagen %}
        <img src="{{ producto.imagen.url }}" class="card-img-top fixed-img rounded-top-4" alt="{{ producto.nombre }}">
        {% else %}
        <img src="https://via.placeholder.com/300x200?text=Sin+Imagen" class="card-img-top fixed-img rounded-top-4" alt="Sin imagen">
        {% endif %}

        <!-- Cuerpo de la tarjeta -->
        <div class="card-body d-flex flex-column">
          <h5 class="card-title text-truncate">{{ producto.nombre }}</h5>
          <p class="card-text">{{ producto.descripcion|truncatechars:60 }}</p>
          <!-- Aquí aplicamos el mismo estilo de precio que en el catálogo -->
          <p class="fw-bold fs-5 text-success mb-1">${{ producto.precio }}</p>
          <p class="text-muted small">Stock: {{ producto.stock }}</p>

          <!-- Botón agregar al carrito -->
          <form method="post" action="{% url 'agregar_al_carrito' producto.id %}" class="mt-auto">
            {% csrf_token %}
            {% if producto.stock > 0 %}
              <button type="submit" class="btn btn-primary w-100 mt-2">
                Agregar al carrito
              </button>
            {% else %}
              <button type="button" class="btn btn-secondary w-100 mt-2" disabled>
                Sin stock disponible
              </button>
            {% endif %}
          </form>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>

<!-- Estilos locales -->
<style>
  .fixed-img {
    height: 200px;
    object-fit: cover;
  }
  .card-title {
    font-weight: 600;
    font-size: 1.2rem;
    margin-bottom: 0.5rem;
  }
  .card-text {
    font-size: 0.95rem;
    color: #555;
  }
</style>
{% endblock %}
